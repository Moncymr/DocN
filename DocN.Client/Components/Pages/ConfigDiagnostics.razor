@page "/config/diagnostica"
@using System.Net.Http.Json
@using System.Text.Json
@using DocN.Data.Models
@inject IHttpClientFactory HttpClientFactory
@inject NavigationManager Navigation
@rendermode InteractiveServer

<PageTitle>Diagnostica Configurazione AI - DocN</PageTitle>

<div class="diagnostics-container">
    <div class="diagnostics-header">
        <h2>üìä Diagnostica Configurazione AI</h2>
        <p class="description">Visualizza e gestisci le configurazioni AI del sistema</p>
    </div>

    @if (isLoading)
    {
        <div class="loading">‚è≥ Caricamento diagnostica...</div>
    }
    else if (!string.IsNullOrEmpty(errorMessage))
    {
        <div class="alert alert-error">
            <strong>‚ö†Ô∏è Errore</strong>
            <p>@errorMessage</p>
        </div>
    }
    else if (diagnostics != null)
    {
        <!-- Summary Cards -->
        <div class="summary-grid">
            <div class="summary-card">
                <div class="summary-icon">üìä</div>
                <div class="summary-content">
                    <h3>@diagnostics.TotalConfigurations</h3>
                    <p>Totale Configurazioni</p>
                </div>
            </div>

            @if (diagnostics.ActiveConfiguration != null)
            {
                <div class="summary-card active">
                    <div class="summary-icon">‚úÖ</div>
                    <div class="summary-content">
                        <h3>@diagnostics.ActiveConfiguration.Name</h3>
                        <p>Configurazione Attiva</p>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-icon">‚è∞</div>
                    <div class="summary-content">
                        <h3>@FormatDateTime(diagnostics.ActiveConfiguration.UpdatedAt ?? diagnostics.ActiveConfiguration.CreatedAt)</h3>
                        <p>Ultimo Aggiornamento</p>
                    </div>
                </div>
            }
            else
            {
                <div class="summary-card warning">
                    <div class="summary-icon">‚ö†Ô∏è</div>
                    <div class="summary-content">
                        <h3>Nessuna</h3>
                        <p>Configurazione Attiva</p>
                    </div>
                </div>
            }
        </div>

        <!-- Recommendations -->
        @if (diagnostics.Recommendations != null && diagnostics.Recommendations.Any())
        {
            <div class="recommendations-section">
                <h3>üí° Raccomandazioni</h3>
                @foreach (var recommendation in diagnostics.Recommendations)
                {
                    <div class="recommendation-item">@recommendation</div>
                }
            </div>
        }

        <!-- Cache Management -->
        <div class="cache-management-section">
            <div class="cache-header">
                <div>
                    <h3>üóëÔ∏è Gestione Cache Configurazione</h3>
                    <p class="cache-description">Svuota la cache per forzare il ricaricamento della configurazione dal database</p>
                </div>
                <button class="btn btn-clear-cache" @onclick="ClearCache" disabled="@isClearing">
                    @if (isClearing)
                    {
                        <span>‚è≥ Svuotamento...</span>
                    }
                    else
                    {
                        <span>üóëÔ∏è Svuota Cache</span>
                    }
                </button>
            </div>
            
            @if (!string.IsNullOrEmpty(cacheMessage))
            {
                <div class="cache-message @(cacheMessageType == "success" ? "success" : "error")">
                    @cacheMessage
                </div>
            }
        </div>

        <!-- Configuration List -->
        <div class="configurations-section">
            <h3>üìã Configurazioni Disponibili</h3>
            
            @if (!string.IsNullOrEmpty(activationMessage))
            {
                <div class="activation-message @(activationMessageType == "success" ? "success" : "error")">
                    @activationMessage
                </div>
            }
            
            @if (diagnostics.AllConfigurations != null && diagnostics.AllConfigurations.Any())
            {
                @foreach (var config in diagnostics.AllConfigurations)
                {
                    <div class="config-card @(config.IsActive ? "active" : "")">
                        <div class="config-header">
                            <div class="config-title">
                                <h4>@config.ConfigurationName</h4>
                                @if (config.IsActive)
                                {
                                    <span class="badge badge-active">Attiva</span>
                                }
                            </div>
                            @if (!config.IsActive)
                            {
                                <button class="btn btn-activate" 
                                        @onclick="() => ActivateConfiguration(config.Id)"
                                        disabled="@(isActivating && activatingConfigId == config.Id)">
                                    @if (isActivating && activatingConfigId == config.Id)
                                    {
                                        <span>‚è≥ Attivazione...</span>
                                    }
                                    else
                                    {
                                        <span>‚úì Attiva</span>
                                    }
                                </button>
                            }
                        </div>

                        <div class="config-details">
                            <div class="detail-row">
                                <span class="detail-label">ID:</span>
                                <span class="detail-value">@config.Id</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Creata:</span>
                                <span class="detail-value">@FormatDateTime(config.CreatedAt)</span>
                            </div>
                            @if (config.UpdatedAt.HasValue)
                            {
                                <div class="detail-row">
                                    <span class="detail-label">Aggiornata:</span>
                                    <span class="detail-value">@FormatDateTime(config.UpdatedAt.Value)</span>
                                </div>
                            }
                        </div>

                        <div class="providers-section">
                            <h5>Provider Configurati:</h5>
                            @if (config.HasGeminiKey || config.HasOpenAIKey || config.HasAzureKey || config.HasOllamaEndpoint || config.HasGroqKey)
                            {
                                <div class="provider-badges">
                                    @if (config.HasGeminiKey)
                                    {
                                        <span class="provider-badge gemini">‚úÖ Gemini</span>
                                    }
                                    @if (config.HasOpenAIKey)
                                    {
                                        <span class="provider-badge openai">‚úÖ OpenAI</span>
                                    }
                                    @if (config.HasAzureKey)
                                    {
                                        <span class="provider-badge azure">‚úÖ Azure OpenAI</span>
                                    }
                                    @if (config.HasOllamaEndpoint)
                                    {
                                        <span class="provider-badge ollama">‚úÖ Ollama</span>
                                    }
                                    @if (config.HasGroqKey)
                                    {
                                        <span class="provider-badge groq">‚úÖ Groq</span>
                                    }
                                </div>
                            }
                            else
                            {
                                <div class="no-providers">‚ö†Ô∏è Nessun provider configurato</div>
                            }
                        </div>

                        @if (config.IsActive)
                        {
                            <div class="services-section">
                                <h5>Assegnazione Servizi:</h5>
                                <div class="services-grid">
                                    <div class="service-item">
                                        <span class="service-icon">üí¨</span>
                                        <span class="service-label">Chat:</span>
                                        <span class="service-value">@GetProviderTypeName(config.ChatProvider)</span>
                                    </div>
                                    <div class="service-item">
                                        <span class="service-icon">üß†</span>
                                        <span class="service-label">Embeddings:</span>
                                        <span class="service-value">@GetProviderTypeName(config.EmbeddingsProvider)</span>
                                    </div>
                                    <div class="service-item">
                                        <span class="service-icon">üè∑Ô∏è</span>
                                        <span class="service-label">Tag Extract:</span>
                                        <span class="service-value">@GetProviderTypeName(config.TagExtractionProvider)</span>
                                    </div>
                                    <div class="service-item">
                                        <span class="service-icon">üîç</span>
                                        <span class="service-label">RAG:</span>
                                        <span class="service-value">@GetProviderTypeName(config.RAGProvider)</span>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                }
            }
            else
            {
                <div class="empty-state">
                    <p>Nessuna configurazione disponibile</p>
                </div>
            }
        </div>

        <!-- API Endpoint Info -->
        <div class="api-info">
            <h3>üì° Endpoint API Utilizzato</h3>
            <div class="endpoint-box">
                <code>GET /api/config/diagnostics</code>
            </div>
            <p class="endpoint-description">
                Questo endpoint fornisce informazioni diagnostiche dettagliate sulle configurazioni AI disponibili nel sistema.
            </p>
        </div>
    }
</div>

<style>
    .diagnostics-container {
        padding: 1.5rem;
        max-width: 1400px;
        margin: 0 auto;
        background: #f5f7fa;
        min-height: 100vh;
    }

    .diagnostics-header {
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        margin-bottom: 2rem;
    }

    .diagnostics-header h2 {
        font-size: 2rem;
        margin: 0 0 0.5rem 0;
        color: #2d3748;
        font-weight: 700;
    }

    .description {
        color: #666;
        margin: 0;
        font-size: 1rem;
    }

    .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
    }

    .summary-card {
        background: white;
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        display: flex;
        align-items: center;
        gap: 1rem;
        border: 2px solid #e2e8f0;
        transition: all 0.3s ease;
    }

    .summary-card:hover {
        border-color: #ff6b35;
        box-shadow: 0 4px 12px rgba(255, 107, 53, 0.15);
    }

    .summary-card.active {
        border-color: #28a745;
        background: linear-gradient(135deg, rgba(40, 167, 69, 0.05), rgba(40, 167, 69, 0.02));
    }

    .summary-card.warning {
        border-color: #ffc107;
        background: linear-gradient(135deg, rgba(255, 193, 7, 0.05), rgba(255, 193, 7, 0.02));
    }

    .summary-icon {
        font-size: 2.5rem;
    }

    .summary-content h3 {
        margin: 0;
        font-size: 1.5rem;
        color: #2d3748;
        font-weight: 700;
    }

    .summary-content p {
        margin: 0.25rem 0 0 0;
        color: #666;
        font-size: 0.9rem;
    }

    .recommendations-section {
        background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 193, 7, 0.05));
        padding: 1.5rem;
        border-radius: 12px;
        margin-bottom: 2rem;
        border: 2px solid #ffc107;
    }

    .recommendations-section h3 {
        margin: 0 0 1rem 0;
        color: #2d3748;
        font-weight: 700;
    }

    .recommendation-item {
        padding: 0.75rem 1rem;
        background: white;
        border-radius: 8px;
        margin-bottom: 0.75rem;
        border-left: 4px solid #ffc107;
        font-weight: 500;
    }

    .recommendation-item:last-child {
        margin-bottom: 0;
    }

    .cache-management-section {
        background: white;
        padding: 1.5rem;
        border-radius: 12px;
        margin-bottom: 2rem;
        border: 2px solid #e2e8f0;
        box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }

    .cache-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
    }

    .cache-header h3 {
        margin: 0 0 0.5rem 0;
        color: #2d3748;
        font-weight: 700;
        font-size: 1.2rem;
    }

    .cache-description {
        margin: 0;
        color: #666;
        font-size: 0.9rem;
    }

    .btn-clear-cache {
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        color: white;
        border: none;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        white-space: nowrap;
    }

    .btn-clear-cache:hover:not(:disabled) {
        background: linear-gradient(135deg, #c82333 0%, #bd2130 100%);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(220, 53, 69, 0.4);
    }

    .btn-clear-cache:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    .cache-message {
        margin-top: 1rem;
        padding: 1rem;
        border-radius: 6px;
        font-weight: 500;
    }

    .cache-message.success {
        background: linear-gradient(135deg, rgba(40, 167, 69, 0.1), rgba(40, 167, 69, 0.05));
        color: #28a745;
        border: 2px solid #28a745;
    }

    .cache-message.error {
        background: linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(220, 53, 69, 0.05));
        color: #dc3545;
        border: 2px solid #dc3545;
    }

    .activation-message {
        margin-bottom: 1.5rem;
        padding: 1rem;
        border-radius: 6px;
        font-weight: 500;
    }

    .activation-message.success {
        background: linear-gradient(135deg, rgba(40, 167, 69, 0.1), rgba(40, 167, 69, 0.05));
        color: #28a745;
        border: 2px solid #28a745;
    }

    .activation-message.error {
        background: linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(220, 53, 69, 0.05));
        color: #dc3545;
        border: 2px solid #dc3545;
    }

    .configurations-section {
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        margin-bottom: 2rem;
    }

    .configurations-section h3 {
        margin: 0 0 1.5rem 0;
        color: #2d3748;
        font-weight: 700;
        font-size: 1.4rem;
    }

    .config-card {
        background: #f8f9fa;
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
        border: 2px solid #e2e8f0;
        transition: all 0.3s ease;
    }

    .config-card:last-child {
        margin-bottom: 0;
    }

    .config-card.active {
        border-color: #28a745;
        background: linear-gradient(135deg, rgba(40, 167, 69, 0.05), white);
        box-shadow: 0 2px 8px rgba(40, 167, 69, 0.15);
    }

    .config-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #dee2e6;
    }

    .config-title {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .config-title h4 {
        margin: 0;
        color: #2d3748;
        font-size: 1.2rem;
        font-weight: 700;
    }

    .badge {
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
    }

    .badge-active {
        background: #28a745;
        color: white;
    }

    .btn-activate {
        padding: 0.5rem 1.5rem;
        background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
        color: white;
        border: none;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .btn-activate:hover:not(:disabled) {
        background: linear-gradient(135deg, #f7931e 0%, #e67e22 100%);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(255, 107, 53, 0.4);
    }

    .btn-activate:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    .config-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 0.75rem;
        margin-bottom: 1rem;
    }

    .detail-row {
        display: flex;
        gap: 0.5rem;
    }

    .detail-label {
        font-weight: 600;
        color: #666;
    }

    .detail-value {
        color: #2d3748;
    }

    .providers-section,
    .services-section {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid #dee2e6;
    }

    .providers-section h5,
    .services-section h5 {
        margin: 0 0 0.75rem 0;
        color: #2d3748;
        font-size: 1rem;
        font-weight: 600;
    }

    .provider-badges {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
    }

    .provider-badge {
        padding: 0.5rem 1rem;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 600;
        color: white;
    }

    .provider-badge.gemini {
        background: linear-gradient(135deg, #4285F4 0%, #34A853 100%);
    }

    .provider-badge.openai {
        background: linear-gradient(135deg, #10a37f 0%, #1a7f64 100%);
    }

    .provider-badge.azure {
        background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
    }

    .provider-badge.ollama {
        background: linear-gradient(135deg, #000000 0%, #2d2d2d 100%);
    }

    .provider-badge.groq {
        background: linear-gradient(135deg, #f55036 0%, #d43f2a 100%);
    }

    .no-providers {
        color: #ffc107;
        font-weight: 600;
        padding: 0.5rem;
        background: rgba(255, 193, 7, 0.1);
        border-radius: 6px;
    }

    .services-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 0.75rem;
    }

    .service-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem;
        background: white;
        border-radius: 6px;
        border: 1px solid #e2e8f0;
    }

    .service-icon {
        font-size: 1.2rem;
    }

    .service-label {
        font-weight: 600;
        color: #666;
    }

    .service-value {
        color: #28a745;
        font-weight: 600;
    }

    .api-info {
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }

    .api-info h3 {
        margin: 0 0 1rem 0;
        color: #2d3748;
        font-weight: 700;
    }

    .endpoint-box {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 6px;
        border: 1px solid #dee2e6;
        margin-bottom: 1rem;
    }

    .endpoint-box code {
        color: #ff6b35;
        font-weight: 600;
        font-size: 1rem;
    }

    .endpoint-description {
        color: #666;
        margin: 0;
        line-height: 1.6;
    }

    .loading {
        text-align: center;
        padding: 3rem;
        color: #666;
        font-size: 1.1rem;
    }

    .alert {
        padding: 1.25rem;
        border-radius: 8px;
        margin-bottom: 2rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .alert-error {
        background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        color: #721c24;
        border: 2px solid #dc3545;
        border-left: 5px solid #dc3545;
    }

    .empty-state {
        text-align: center;
        padding: 2rem;
        color: #999;
    }

    @@media (max-width: 768px) {
        .diagnostics-container {
            padding: 1rem;
        }

        .summary-grid {
            grid-template-columns: 1fr;
        }

        .config-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
        }

        .cache-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
        }

        .btn-clear-cache {
            width: 100%;
        }
    }
</style>

@code {
    private ConfigDiagnosticsResponse? diagnostics;
    private bool isLoading = true;
    private bool isClearing = false;
    private bool isActivating = false;
    private int activatingConfigId = 0;
    private string errorMessage = string.Empty;
    private string cacheMessage = string.Empty;
    private string cacheMessageType = string.Empty;
    private string activationMessage = string.Empty;
    private string activationMessageType = string.Empty;
    
    // Delay after cache clear to ensure the operation completes before reloading
    private const int CacheClearDelayMilliseconds = 500;

    protected override async Task OnInitializedAsync()
    {
        await LoadDiagnostics();
    }

    private async Task LoadDiagnostics()
    {
        isLoading = true;
        errorMessage = string.Empty;

        try
        {
            var httpClient = HttpClientFactory.CreateClient("BackendAPI");
            var response = await httpClient.GetAsync("api/config/diagnostics");

            if (response.IsSuccessStatusCode)
            {
                diagnostics = await response.Content.ReadFromJsonAsync<ConfigDiagnosticsResponse>();
            }
            else
            {
                errorMessage = $"Errore nel caricamento: {response.StatusCode}";
            }
        }
        catch (Exception ex)
        {
            errorMessage = $"Errore: {ex.Message}";
        }
        finally
        {
            isLoading = false;
        }
    }

    private async Task ActivateConfiguration(int configId)
    {
        isActivating = true;
        activatingConfigId = configId;
        activationMessage = string.Empty;
        activationMessageType = string.Empty;

        try
        {
            var httpClient = HttpClientFactory.CreateClient("BackendAPI");
            var response = await httpClient.PostAsync($"api/config/{configId}/activate", null);

            if (response.IsSuccessStatusCode)
            {
                activationMessage = $"‚úÖ Configurazione attivata con successo! La cache √® stata svuotata automaticamente.";
                activationMessageType = "success";
                
                // Wait briefly to ensure activation completes
                await Task.Delay(CacheClearDelayMilliseconds);
                await LoadDiagnostics(); // Reload to show updated state
            }
            else
            {
                activationMessage = $"‚ùå Errore nell'attivazione: {response.StatusCode}. Verifica i log del server.";
                activationMessageType = "error";
            }
        }
        catch (Exception ex)
        {
            activationMessage = $"‚ùå Errore: {ex.Message}";
            activationMessageType = "error";
        }
        finally
        {
            isActivating = false;
            activatingConfigId = 0;
        }
    }

    private async Task ClearCache()
    {
        isClearing = true;
        cacheMessage = string.Empty;
        cacheMessageType = string.Empty;

        try
        {
            var httpClient = HttpClientFactory.CreateClient("BackendAPI");
            var response = await httpClient.PostAsync("api/config/clear-cache", null);

            if (response.IsSuccessStatusCode)
            {
                var result = await response.Content.ReadFromJsonAsync<ClearCacheResponse>();
                cacheMessage = result?.Message ?? "‚úÖ Cache svuotata con successo!";
                cacheMessageType = "success";
                
                // Wait briefly to ensure cache clear completes before reloading
                await Task.Delay(CacheClearDelayMilliseconds);
                await LoadDiagnostics();
            }
            else
            {
                cacheMessage = $"‚ùå Errore durante lo svuotamento della cache: {response.StatusCode}";
                cacheMessageType = "error";
            }
        }
        catch (Exception ex)
        {
            cacheMessage = $"‚ùå Errore: {ex.Message}";
            cacheMessageType = "error";
        }
        finally
        {
            isClearing = false;
        }
    }

    private string FormatDateTime(DateTime dateTime)
    {
        return dateTime.ToString("dd/MM/yyyy HH:mm:ss");
    }

    private string GetProviderTypeName(int? providerType)
    {
        if (!providerType.HasValue)
            return "Non configurato";

        // Convert integer to AIProviderType enum from DocN.Data.Models
        var providerTypeEnum = (AIProviderType)providerType.Value;
        
        return providerTypeEnum switch
        {
            AIProviderType.Gemini => "Gemini",
            AIProviderType.OpenAI => "OpenAI",
            AIProviderType.AzureOpenAI => "Azure OpenAI",
            AIProviderType.Ollama => "Ollama",
            AIProviderType.Groq => "Groq",
            _ => "Non configurato"
        };
    }

    // Response models matching the API
    private class ConfigDiagnosticsResponse
    {
        public DateTime Timestamp { get; set; }
        public int TotalConfigurations { get; set; }
        public ActiveConfigInfo? ActiveConfiguration { get; set; }
        public bool MultipleActiveWarning { get; set; }
        public List<ConfigurationInfo> AllConfigurations { get; set; } = new();
        public List<string> Recommendations { get; set; } = new();
    }

    private class ActiveConfigInfo
    {
        public int Id { get; set; }
        public string Name { get; set; } = string.Empty;
        public DateTime CreatedAt { get; set; }
        public DateTime? UpdatedAt { get; set; }
        public bool HasGeminiKey { get; set; }
        public bool HasOpenAIKey { get; set; }
        public bool HasAzureKey { get; set; }
    }

    private class ConfigurationInfo
    {
        public int Id { get; set; }
        public string ConfigurationName { get; set; } = string.Empty;
        public bool IsActive { get; set; }
        public DateTime CreatedAt { get; set; }
        public DateTime? UpdatedAt { get; set; }
        public bool HasGeminiKey { get; set; }
        public bool HasOpenAIKey { get; set; }
        public bool HasAzureKey { get; set; }
        public bool HasOllamaEndpoint { get; set; }
        public bool HasGroqKey { get; set; }
        public int ProviderType { get; set; }
        public int? ChatProvider { get; set; }
        public int? EmbeddingsProvider { get; set; }
        public int? TagExtractionProvider { get; set; }
        public int? RAGProvider { get; set; }
        public int SortOrder { get; set; }
    }

    private class ClearCacheResponse
    {
        public bool Success { get; set; }
        public string Message { get; set; } = string.Empty;
        public DateTime Timestamp { get; set; }
    }
}
