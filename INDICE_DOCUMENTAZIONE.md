# üìñ Indice Documentazione - DocN Enterprise RAG

## üéØ Inizio Rapido

**Domanda:** "Cosa manca al progetto per avere una RAG documentale aziendale ottimale?"

**Risposta Rapida:** Leggi **[RISPOSTA_GAP_ANALYSIS.md](RISPOSTA_GAP_ANALYSIS.md)** (15 minuti)

---

## üìö Guida alla Documentazione

### Per Manager e Decision Makers

1. **[RISPOSTA_GAP_ANALYSIS.md](RISPOSTA_GAP_ANALYSIS.md)** ‚≠ê **INIZIA QUI**
   - Analisi completa di cosa manca
   - Priorit√† e impatti business
   - Investimento e ROI
   - Raccomandazioni esecutive
   - **Tempo lettura:** 15-20 minuti

2. **[README.md](README.md)** 
   - Panoramica progetto
   - Caratteristiche principali
   - Quick start
   - Casi d'uso
   - **Tempo lettura:** 10 minuti

3. **[ENTERPRISE_RAG_ROADMAP.md](ENTERPRISE_RAG_ROADMAP.md)**
   - Roadmap dettagliata implementazione
   - Stime effort per ogni feature
   - Matrice prioritizzazione
   - Timeline e milestone
   - **Tempo lettura:** 20 minuti

### Per Technical Leaders e Architects

4. **[SECURITY_BEST_PRACTICES.md](SECURITY_BEST_PRACTICES.md)**
   - Best practices sicurezza enterprise
   - Autenticazione e autorizzazione
   - Gestione secrets
   - Compliance (GDPR, SOC2, ISO 27001)
   - Encryption e protezione dati
   - **Tempo lettura:** 30 minuti

5. **[DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md)**
   - Deploy su vari ambienti
   - Docker e Kubernetes
   - Azure App Service
   - CI/CD pipelines
   - Troubleshooting
   - **Tempo lettura:** 30 minuti

6. **[MONITORING_OBSERVABILITY.md](MONITORING_OBSERVABILITY.md)**
   - Metriche business e tecniche
   - Logging strutturato
   - Distributed tracing
   - Dashboard e alerting
   - SLI, SLO, SLA
   - **Tempo lettura:** 25 minuti

### Per Developers e Integrators

7. **[API_DOCUMENTATION.md](API_DOCUMENTATION.md)**
   - Specifica API REST completa
   - Endpoint documenti, search, RAG
   - Autenticazione API
   - Rate limits
   - Esempi SDK (JS, Python, C#)
   - **Tempo lettura:** 40 minuti
   - **Riferimento:** Da consultare durante sviluppo

8. **[TROUBLESHOOTING.md](TROUBLESHOOTING.md)** ‚ö†Ô∏è **NUOVO**
   - Risoluzione errori comuni
   - "Impossibile stabilire la connessione (localhost:5211)"
   - Architettura dual-server spiegata
   - Script di avvio automatico
   - Health check e diagnostica
   - **Tempo lettura:** 10 minuti

### Documentazione Esistente (Pre-esistente)

9. **[MULTI_PROVIDER_CONFIG.md](MULTI_PROVIDER_CONFIG.md)**
   - Configurazione AI providers
   - Gemini, OpenAI, Azure OpenAI
   - Service assignment
   - Fallback configuration

10. **[OCR_IMPLEMENTATION.md](OCR_IMPLEMENTATION.md)**
   - Implementazione OCR Tesseract
   - Estrazione testo da immagini
   - Setup e configurazione

11. **[VECTOR_TYPE_GUIDE.md](VECTOR_TYPE_GUIDE.md)**
    - Guida tipi vettoriali SQL Server 2025
    - Configurazione embeddings
    - Performance optimization

12. **Database/**
    - [Database/README.md](Database/README.md) - Setup database
    - [Database/QUICK_START.md](Database/QUICK_START.md) - Quick start
    - [Database/SOLUTION_EXPLAINED.md](Database/SOLUTION_EXPLAINED.md) - Schema spiegato

### Documentazione Funzionalit√† Avanzate

12. **üîé Guida alle Funzionalit√† di Ricerca e RAG** ‚≠ê **NUOVO**
    - Tipi di ricerca disponibili (Hybrid, Vector, Text)
    - Esempi pratici su documenti di esempio
    - Configurazione RAG step-by-step
    - Microsoft Agent Framework implementation
    - Chart RAG e visualizzazioni
    - Best practices e ottimizzazioni
    - **üöÄ Quick Start RAG (5 minuti)** - Linea 773
    - **Tempo lettura:** 45 minuti
    - **Riferimento:** Guida completa all'uso delle funzionalit√† di ricerca e AI

---

## üöÄ Percorsi di Lettura Consigliati

### Path 1: Executive Overview (30 minuti)
Per CEO, CTO, Product Managers che vogliono capire rapidamente gaps e investimenti:

1. ‚úÖ **RISPOSTA_GAP_ANALYSIS.md** - Sintesi completa
2. ‚úÖ **ENTERPRISE_RAG_ROADMAP.md** - Sezioni: "Matrice Prioritizzazione" e "Roadmap Implementazione"
3. ‚úÖ **README.md** - Sezione "Roadmap"

**Output:** Decisione su priorit√† e budget

---

### Path 2: Technical Deep Dive (2-3 ore)
Per Architects, Tech Leads che devono pianificare implementazione:

1. ‚úÖ **RISPOSTA_GAP_ANALYSIS.md** - Capire cosa serve
2. ‚úÖ **ENTERPRISE_RAG_ROADMAP.md** - Dettagli implementativi
3. ‚úÖ **SECURITY_BEST_PRACTICES.md** - Requisiti sicurezza
4. ‚úÖ **DEPLOYMENT_GUIDE.md** - Strategia deployment
5. ‚úÖ **MONITORING_OBSERVABILITY.md** - Setup monitoring
6. ‚úÖ **API_DOCUMENTATION.md** - Design API

**Output:** Piano tecnico dettagliato e architettura

---

### Path 3: Implementation Focus (1-2 ore)
Per Developers che devono iniziare subito con quick wins:

1. ‚úÖ **RISPOSTA_GAP_ANALYSIS.md** - Sezione "Quick Wins"
2. ‚úÖ **ENTERPRISE_RAG_ROADMAP.md** - Sezione "Fase 1"
3. ‚úÖ **SECURITY_BEST_PRACTICES.md** - Sezioni specifiche (es. Rate Limiting, Health Checks)
4. ‚úÖ **API_DOCUMENTATION.md** - Design endpoint

**Output:** Lista tasks implementabili subito

---

### Path 4: Security & Compliance (1 ora)
Per Security Officers, Compliance Managers:

1. ‚úÖ **SECURITY_BEST_PRACTICES.md** - Tutto
2. ‚úÖ **ENTERPRISE_RAG_ROADMAP.md** - Sezione "Audit Logging"
3. ‚úÖ **DEPLOYMENT_GUIDE.md** - Sezione "Configurazione Post-Deployment"

**Output:** Checklist compliance e security assessment

---

### Path 5: RAG & AI Features (1.5 ore) ‚≠ê NUOVO
Per Developers, AI Engineers che vogliono implementare/usare funzionalit√† RAG:

1. ‚úÖ **üöÄ Quick Start RAG (5 minuti)** - Linea 773 di questo documento - Per iniziare subito!
2. ‚úÖ **Guida Ricerca e RAG** (in questo documento) - Sezione completa (linea 239)
3. ‚úÖ **MULTI_PROVIDER_CONFIG.md** - Configurazione AI providers
4. ‚úÖ **VECTOR_TYPE_GUIDE.md** - Setup embeddings e vettori
5. ‚úÖ **API_DOCUMENTATION.md** - Endpoint RAG e Search

**Output:** Sistema RAG funzionante con esempi pratici

---

## üìä Riassunto Veloce

### Cosa C'√® Gi√† ‚úÖ
- Core RAG avanzato con Semantic Kernel
- Hybrid search (vector + full-text)
- Multi-provider AI (Gemini, OpenAI, Azure)
- OCR integrato
- Multi-tenancy
- SQL Server 2025 con VECTOR
- **Microsoft Agent Framework** per RAG multi-agente
- Tre modalit√† di ricerca (Hybrid, Vector, Text)

### Funzionalit√† di Ricerca Disponibili ‚úÖ
1. **Ricerca Ibrida** - Combina vector + text con RRF
2. **Ricerca Vettoriale** - Similarit√† semantica avanzata
3. **Ricerca Testuale** - Full-text search tradizionale

### Sistema RAG Implementato ‚úÖ
- Retrieval Agent + Synthesis Agent
- Conversazioni contestuali
- Citazione automatica delle fonti
- Streaming responses
- Multi-document analysis

### Cosa Manca ‚ùå (Priorit√† CRITICA)
1. **API REST pubblica** - Per integrazioni
2. **Audit logging** - Per compliance
3. **Monitoring** - Per production
4. **Rate limiting** - Per protezione
5. **Health checks** - Per orchestrazione

### Investimento üí∞
- **Fase 1 (Production Ready):** 6 settimane, ~240 ore
- **Infrastruttura:** $200-650/mese
- **ROI:** Sblocca clienti enterprise

### Raccomandazione üéØ
Implementare **Fase 1** (6 settimane) per rendere il sistema production-ready e vendibile a clienti enterprise con requisiti di compliance.

---

## üîç Cerca nella Documentazione

### Per Argomento

**API & Integrazioni:**
- [API_DOCUMENTATION.md](API_DOCUMENTATION.md) - Specifica completa
- [ENTERPRISE_RAG_ROADMAP.md](ENTERPRISE_RAG_ROADMAP.md) - Sezione "API REST Documentata"

**Sicurezza:**
- [SECURITY_BEST_PRACTICES.md](SECURITY_BEST_PRACTICES.md) - Best practices complete
- [.gitignore](.gitignore) - Protezione secrets

**Deployment:**
- [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) - Guida completa
- [Database/README.md](Database/README.md) - Setup database

**Monitoring:**
- [MONITORING_OBSERVABILITY.md](MONITORING_OBSERVABILITY.md) - Guida completa
- [ENTERPRISE_RAG_ROADMAP.md](ENTERPRISE_RAG_ROADMAP.md) - Sezione "Monitoring"

**Roadmap:**
- [ENTERPRISE_RAG_ROADMAP.md](ENTERPRISE_RAG_ROADMAP.md) - Roadmap dettagliata
- [RISPOSTA_GAP_ANALYSIS.md](RISPOSTA_GAP_ANALYSIS.md) - Priorit√† e ROI

---

## üîé Guida alle Funzionalit√† di Ricerca e RAG

### Tipi di Ricerca Disponibili

DocN offre tre modalit√† di ricerca avanzate per trovare documenti nel sistema:

#### 1. **Ricerca Ibrida (Hybrid Search)** - ‚≠ê CONSIGLIATA

La ricerca ibrida combina ricerca vettoriale semantica e ricerca full-text utilizzando l'algoritmo **Reciprocal Rank Fusion (RRF)** per risultati ottimali.

**Endpoint API:** `POST /api/search/hybrid`

**Esempio di Richiesta:**
```json
{
  "query": "contratti di lavoro 2024",
  "topK": 10,
  "minSimilarity": 0.7,
  "categoryFilter": "Contracts",
  "userId": "user123"
}
```

**Quando usarla:**
- ‚úÖ Ricerche generiche che richiedono sia precisione concettuale che matching esatto
- ‚úÖ Query in linguaggio naturale ("Trova i contratti firmati quest'anno")
- ‚úÖ Ricerca di concetti simili ma con parole diverse

**Esempio pratico con documenti di esempio:**
- Query: "documentazione tecniche WPC2025"
- Documenti trovati:
  - `Sintesi appunti wpc2025.docx` (alto score vettoriale + match testuale)
  - `testdocupdat.pdf` (se contiene riferimenti tecnici)

---

#### 2. **Ricerca Vettoriale (Vector Search)** - Alta Precisione Semantica

Ricerca basata su similarit√† semantica usando embeddings vettoriali. Trova documenti concettualmente simili anche se usano parole diverse.

**Endpoint API:** `POST /api/search/vector`

**Esempio di Richiesta:**
```json
{
  "query": "procedure di chiusura versione software",
  "topK": 5,
  "minSimilarity": 0.75
}
```

**Quando usarla:**
- ‚úÖ Ricerca concettuale ("Trova documenti che parlano di gestione progetto")
- ‚úÖ Query con sinonimi o termini diversi ma stesso significato
- ‚úÖ Quando la semantica √® pi√π importante della corrispondenza esatta

**Esempio pratico:**
- Query: "processo rilascio software"
- Documenti trovati:
  - `Attivit√† GitLab per chiusura versione e apertura fix.docx` (alto match semantico)

**Configurazione richiesta:**
- Embeddings devono essere generati per tutti i documenti
- Servizio AI configurato (Gemini, OpenAI o Azure OpenAI)
- Dimensione vettori: tipicamente 768 o 1536 dimensioni

---

#### 3. **Ricerca Testuale (Text Search)** - Matching Esatto

Ricerca full-text tradizionale basata su keyword matching nel testo estratto e nel nome del file.

**Endpoint API:** `POST /api/search/text`

**Esempio di Richiesta:**
```json
{
  "query": "GitLab chiusura",
  "topK": 10,
  "categoryFilter": "Technical"
}
```

**Quando usarla:**
- ‚úÖ Ricerca di termini specifici o codici esatti
- ‚úÖ Nomi di file conosciuti
- ‚úÖ Quando non hai embeddings generati

**Esempio pratico:**
- Query: "GitLab"
- Documenti trovati:
  - `Attivit√† GitLab per chiusura versione e apertura fix.docx` (match esatto nel nome)

---

### üìä Confronto Tipi di Ricerca

| Caratteristica | Hybrid Search | Vector Search | Text Search |
|---------------|---------------|---------------|-------------|
| **Precisione** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| **Velocit√†** | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| **Ricerca Semantica** | ‚úÖ S√¨ | ‚úÖ S√¨ | ‚ùå No |
| **Match Esatto** | ‚úÖ S√¨ | ‚ö†Ô∏è Parziale | ‚úÖ S√¨ |
| **Richiede Embeddings** | ‚úÖ S√¨ | ‚úÖ S√¨ | ‚ùå No |
| **Costo Computazionale** | Alto | Medio | Basso |

---

## ü§ñ Sistema RAG (Retrieval-Augmented Generation)

### Cos'√® il RAG in DocN?

Il sistema RAG di DocN permette di fare domande in linguaggio naturale sui tuoi documenti e ottenere risposte intelligenti generate dall'AI basate sul contenuto effettivo dei documenti.

**Architettura RAG:**
```
User Query ‚Üí Embedding Generation ‚Üí Vector Search ‚Üí Document Retrieval
    ‚Üì
Context Building ‚Üí AI Agent Processing ‚Üí Response Generation
    ‚Üì
Answer with Citations
```

---

### üîß Configurazione RAG - Step by Step

#### Step 1: Configurare il Provider AI

DocN supporta multipli provider AI. Scegli uno tra:

**Opzione A: Google Gemini (Consigliato per iniziare)**
```json
{
  "AIConfiguration": {
    "DefaultProvider": "Gemini",
    "Gemini": {
      "ApiKey": "YOUR_GEMINI_API_KEY",
      "Model": "gemini-2.0-flash-exp",
      "EmbeddingModel": "text-embedding-004"
    }
  }
}
```

**Opzione B: OpenAI**
```json
{
  "AIConfiguration": {
    "DefaultProvider": "OpenAI",
    "OpenAI": {
      "ApiKey": "sk-YOUR_OPENAI_KEY",
      "Model": "gpt-4",
      "EmbeddingModel": "text-embedding-3-large"
    }
  }
}
```

**Opzione C: Azure OpenAI (Per Enterprise)**
```json
{
  "AIConfiguration": {
    "DefaultProvider": "AzureOpenAI",
    "AzureOpenAI": {
      "Endpoint": "https://your-resource.openai.azure.com/",
      "ApiKey": "YOUR_AZURE_KEY",
      "DeploymentName": "gpt-4",
      "EmbeddingDeploymentName": "text-embedding-ada-002"
    }
  }
}
```

**Dove configurare:**
- File: `appsettings.json` o `appsettings.Development.json`
- Variabili d'ambiente (production)
- Azure Key Vault (per enterprise)

---

#### Step 2: Generare Embeddings per i Documenti

Prima di usare RAG, i documenti devono avere embeddings generati.

**Via UI:**
1. Accedi a DocN
2. Vai su "Documents"
3. Carica documenti
4. ‚úÖ Seleziona "Generate Embeddings" durante l'upload

**Via API:**
```bash
curl -X POST http://localhost:5000/Documents \
  -H "X-API-Key: your-api-key" \
  -F "file=@contratto.pdf" \
  -F "generateEmbeddings=true" \
  -F "category=Contracts"
```

**Batch Processing (per documenti esistenti):**
```bash
# Trigger batch embedding generation
POST /Documents/batch/embeddings
{
  "documentIds": [1, 2, 3, 4, 5],
  "provider": "Gemini"
}
```

---

#### Step 3: Utilizzare il RAG

**Endpoint RAG:** `POST /api/SemanticChat/ask`

**Esempio di Query Completa:**
```json
{
  "query": "Quali sono i passi per chiudere una versione in GitLab?",
  "userId": "user123",
  "topK": 5,
  "conversationId": null
}
```

**Risposta:**
```json
{
  "answer": "Secondo il documento [Documento 1], i passi per chiudere una versione in GitLab sono:\n1. Completare tutti i merge request\n2. Eseguire i test di regressione\n3. Aggiornare la documentazione\n4. Creare il tag della versione\n5. Aprire branch per eventuali fix",
  "sourceDocuments": [
    {
      "documentId": 42,
      "fileName": "Attivit√† GitLab per chiusura versione e apertura fix.docx",
      "category": "Technical",
      "similarityScore": 0.89,
      "relevantChunk": "Le attivit√† principali per la chiusura versione includono..."
    }
  ],
  "conversationId": 15,
  "responseTimeMs": 1250
}
```

---

### üéØ Esempi Pratici di Query RAG sui Documenti di Esempio

#### Esempio 1: Query su Documentazione Tecnica
**Documento:** `Sintesi appunti wpc2025.docx`

**Query:**
```json
{
  "query": "Riassumimi i punti chiave del WPC2025",
  "userId": "user123"
}
```

**Risposta Attesa:**
"Secondo il documento [Documento 1 - Sintesi appunti wpc2025.docx], i punti chiave del WPC2025 includono: [contenuto estratto dal documento]..."

---

#### Esempio 2: Query su Processo GitLab
**Documento:** `Attivit√† GitLab per chiusura versione e apertura fix.docx`

**Query:**
```json
{
  "query": "Come si gestiscono i fix dopo il rilascio?",
  "userId": "user123"
}
```

**Risposta Attesa:**
"Basandomi su [Documento 1], dopo il rilascio si aprono branch dedicati per i fix. Il processo include: [dettagli dal documento]..."

---

#### Esempio 3: Query Multi-Documento
**Documenti:** Tutti i documenti caricati

**Query:**
```json
{
  "query": "Confronta le procedure descritte nei vari documenti tecnici",
  "userId": "user123",
  "topK": 10
}
```

**Risposta Attesa:**
Il sistema analizzer√† tutti i documenti rilevanti e fornir√† una sintesi comparativa citando le fonti.

---

### üèóÔ∏è Microsoft Agent Framework - Implementazione Chart RAG

**Domanda:** La chart RAG √® implementabile tramite Microsoft Agent Framework?

**Risposta:** ‚úÖ **S√¨, √® gi√† implementata!**

DocN utilizza **Microsoft Semantic Kernel Agent Framework** per implementare un sistema RAG multi-agente avanzato.

#### Architettura Agenti Corrente

**1. Retrieval Agent (Agente di Recupero)**
- **Ruolo:** Trova documenti rilevanti e estrae informazioni pertinenti
- **Responsabilit√†:**
  - Comprendere l'intento della query
  - Identificare concetti chiave
  - Determinare documenti pi√π rilevanti
  - Estrarre informazioni pertinenti

**Implementazione:**
```csharp
_retrievalAgent = new ChatCompletionAgent
{
    Name = "RetrievalAgent",
    Instructions = @"You are a specialized retrieval agent...",
    Kernel = _kernel
};
```

**2. Synthesis Agent (Agente di Sintesi)**
- **Ruolo:** Genera risposte in linguaggio naturale
- **Responsabilit√†:**
  - Analizzare informazioni dal retrieval agent
  - Generare risposte accurate
  - Citare fonti appropriatamente
  - Mantenere coerenza conversazionale

**Implementazione:**
```csharp
_synthesisAgent = new ChatCompletionAgent
{
    Name = "SynthesisAgent",
    Instructions = @"You are an expert synthesis agent...",
    Kernel = _kernel
};
```

---

#### Come Funziona il Sistema Multi-Agente

**Flusso di Elaborazione:**

```
1. User Query
   ‚Üì
2. Retrieval Agent
   - Genera query embedding
   - Ricerca vettoriale su documenti
   - Seleziona top K documenti rilevanti
   - Estrae chunk pertinenti
   ‚Üì
3. Context Building
   - Formatta documenti trovati
   - Costruisce prompt strutturato
   - Include conversazione precedente
   ‚Üì
4. Synthesis Agent
   - Riceve context da Retrieval Agent
   - Genera risposta con AI
   - Aggiunge citazioni ([Documento N])
   - Mantiene tono professionale
   ‚Üì
5. Response
   - Risposta in linguaggio naturale
   - Lista documenti sorgente con score
   - Metadata (tempo, documenti usati)
```

---

#### Step-by-Step: Come Far Funzionare gli Agenti

**Step 1: Verifica Configurazione Semantic Kernel**

File: `Program.cs` o `ServiceCollectionExtensions.cs`

```csharp
// Registrazione Semantic Kernel
builder.Services.AddKernel()
    .AddAzureOpenAIChatCompletion(
        deploymentName: config["AzureOpenAI:DeploymentName"],
        endpoint: config["AzureOpenAI:Endpoint"],
        apiKey: config["AzureOpenAI:ApiKey"]
    );
```

**Step 2: Registra SemanticRAGService**

```csharp
builder.Services.AddScoped<ISemanticRAGService, SemanticRAGService>();
```

**Step 3: Usa il Servizio nel Controller**

```csharp
[HttpPost("ask")]
public async Task<ActionResult<SemanticRAGResponse>> AskQuestion(
    [FromBody] RAGRequest request)
{
    var response = await _ragService.GenerateResponseAsync(
        query: request.Query,
        userId: User.FindFirstValue(ClaimTypes.NameIdentifier),
        conversationId: request.ConversationId,
        topK: 5
    );
    
    return Ok(response);
}
```

---

#### Estendere il Sistema con Agenti Personalizzati

**Esempio: Aggiungere Classification Agent**

```csharp
// Agente per classificare intent delle query
_classificationAgent = new ChatCompletionAgent
{
    Name = "ClassificationAgent",
    Instructions = @"You classify user queries into categories:
    - FACTUAL: Seeking specific information
    - SUMMARIZATION: Asking for summary
    - COMPARISON: Comparing multiple documents
    - PROCEDURAL: Asking for step-by-step instructions",
    Kernel = _kernel
};
```

**Uso con AgentGroupChat:**
```csharp
_agentChat = new AgentGroupChat(
    _classificationAgent,
    _retrievalAgent,
    _synthesisAgent
);

await foreach (var message in _agentChat.InvokeAsync())
{
    // Process agent collaboration
}
```

---

### üìà Chart RAG - Visualizzazione Grafici

**Possibile Estensione Futura:** Agente per generare grafici e chart dai dati documentali

**Implementazione Proposta (Non ancora implementata):**

```csharp
// Esempio di come potrebbe essere implementato
_chartGenerationAgent = new ChatCompletionAgent
{
    Name = "ChartAgent",
    Instructions = @"You extract numerical data from documents 
    and suggest appropriate chart types (bar, line, pie, etc.).
    Output JSON format for chart libraries.",
    Kernel = _kernel,
    Plugins = new[] { new ChartGenerationPlugin() }
};
```

**Flusso Chart RAG Proposto:**
1. User chiede: "Mostra un grafico dei costi annuali dai contratti"
2. Retrieval Agent ‚Üí Trova contratti con costi
3. Chart Agent (da implementare) ‚Üí Estrae dati numerici, suggerisce chart tipo
4. Synthesis Agent ‚Üí Genera descrizione + JSON per chart
5. Frontend ‚Üí Renderizza chart con Chart.js/D3.js

**Nota:** Questa √® una proposta di estensione futura. Attualmente DocN implementa Retrieval Agent e Synthesis Agent.

---

### üîß Configurazione Avanzata RAG

**Parametri Ottimizzabili:**

```csharp
// In SearchOptions
public class SearchOptions
{
    public int TopK { get; set; } = 10;              // Quanti documenti recuperare
    public double MinSimilarity { get; set; } = 0.7;  // Soglia similarit√† (0-1)
    public string? CategoryFilter { get; set; }       // Filtra per categoria
    public string? OwnerId { get; set; }              // Filtra per utente
    public DocumentVisibility? VisibilityFilter { get; set; }  // Public/Private
}
```

**Tuning per Performance:**
- **TopK = 5**: Veloce, per risposte rapide
- **TopK = 10-15**: Bilanciato, uso standard
- **TopK = 20+**: Completo, per analisi profonde

**Tuning per Precisione:**
- **MinSimilarity = 0.9**: Solo match quasi perfetti
- **MinSimilarity = 0.7**: Bilanciato (default)
- **MinSimilarity = 0.5**: Pi√π permissivo, pi√π risultati

---

### üéì Best Practices RAG

**1. Chunking Documenti:**
- Chunk size ottimale: 500-1000 caratteri
- Overlap: 100-200 caratteri per contesto

**2. Prompt Engineering:**
- System prompt chiaro e specifico
- Include istruzioni di citazione
- Specifica formato output desiderato

**3. Gestione Conversazioni:**
- Mantieni ultimi 10 messaggi per contesto
- Salva conversazioni per analytics
- Implementa timeout sessione

**4. Monitoring:**
- Traccia similarityScore medio
- Monitora response time
- Log documenti mai recuperati

---

### üöÄ Quick Start RAG

**5 Minuti per Testare RAG:**

```bash
# 1. Configura API Key
export GEMINI_API_KEY="your-key-here"

# 2. Avvia applicazione
dotnet run --project DocN.Server

# 3. Carica documento di test
curl -X POST http://localhost:5000/Documents \
  -F "file=@test.pdf" \
  -F "generateEmbeddings=true"

# 4. Fai una domanda
curl -X POST http://localhost:5000/api/SemanticChat/ask \
  -H "Content-Type: application/json" \
  -d '{
    "query": "Di cosa parla questo documento?",
    "userId": "test-user"
  }'
```

---

### üìö Risorse Aggiuntive

**Documentazione Microsoft:**
- [Semantic Kernel Agents](https://learn.microsoft.com/semantic-kernel/agents/)
- [Chat Completion Agents](https://learn.microsoft.com/semantic-kernel/agents/chat-completion-agent)

**File Rilevanti nel Progetto:**
- `/DocN.Data/Services/SemanticRAGService.cs` - Implementazione RAG principale
- `/DocN.Data/Services/HybridSearchService.cs` - Ricerca ibrida
- `/DocN.Data/Services/Agents/` - Agenti specializzati
- `/DocN.Server/Controllers/SemanticChatController.cs` - API endpoint

---

## üìû Supporto

**Per domande su questa documentazione:**
- Aprire issue su GitHub: https://github.com/Moncymr/DocN/issues
- Tag: `documentation`, `enterprise`, `roadmap`

**Per contribuire alla documentazione:**
- Fork repository
- Aggiornare/creare file .md
- Aprire Pull Request

---

## ‚úÖ Checklist per Decision Makers

Prima di procedere con implementazione, assicurati di aver:

- [ ] Letto **RISPOSTA_GAP_ANALYSIS.md**
- [ ] Compreso priorit√† (CRITICA vs MEDIA vs BASSA)
- [ ] Valutato investimento (6 settimane + infra)
- [ ] Identificato target clienti (enterprise vs SMB)
- [ ] Definito timeline implementazione
- [ ] Allocato risorse (1-2 developers)
- [ ] Approvato budget infrastruttura ($200-650/mese)
- [ ] Letto sezioni rilevanti di SECURITY_BEST_PRACTICES.md
- [ ] Compreso requisiti compliance (GDPR/SOC2)
- [ ] Pianificato monitoring e observability

---

**Versione Documentazione:** 1.0  
**Data:** Dicembre 2024  
**Ultima Revisione:** 28/12/2024  
**Status:** ‚úÖ Completa e validata

---

## üéì Nota Finale

Questa documentazione risponde alle domande: 
- **"Cosa manca al progetto per avere una RAG documentale aziendale ottimale?"**
- **"Come funzionano le ricerche e il sistema RAG in DocN?"** ‚≠ê NUOVO
- **"Come implementare e configurare gli agenti Microsoft per RAG?"** ‚≠ê NUOVO

La risposta √® articolata in documenti che coprono:
- ‚úÖ Gap analysis dettagliata
- ‚úÖ Roadmap implementazione prioritizzata
- ‚úÖ Best practices sicurezza enterprise
- ‚úÖ Guida deployment completa
- ‚úÖ Setup monitoring production-ready
- ‚úÖ Specifica API REST
- ‚úÖ Protezione secrets (.gitignore)
- ‚úÖ **Guida completa Ricerca e RAG con esempi pratici** ‚≠ê NUOVO
- ‚úÖ **Implementazione Microsoft Agent Framework per Chart RAG** ‚≠ê NUOVO

**Tutto il necessario per trasformare DocN in un sistema RAG enterprise production-ready e per utilizzare appieno le sue funzionalit√† di ricerca avanzata e intelligenza artificiale.**

Buona lettura! üìö
